<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"><head profile="http://gmpg.org/xfn/11"><link rel="stylesheet" href="jme3%20advanced%20jme3_shaders-Dateien/a.css" type="text/css" media="screen"> <script src="jme3%20advanced%20jme3_shaders-Dateien/ga.js" async="" type="text/javascript"></script><script type="text/javascript" src="jme3%20advanced%20jme3_shaders-Dateien/a.js"></script> <link rel="shortcut icon" href="http://jmonkeyengine.org/favicon.ico"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>jMonkeyEngine.org | JME3 and Shaders</title><meta name="generator" content="WordPress 3.1.1"><link rel="alternate" type="application/rss+xml" title="jMonkeyEngine.org | Site Wide Activity RSS Feed" href="http://jmonkeyengine.org/activity/feed/"><link rel="alternate" type="application/rss+xml" title="jMonkeyEngine.org Blog Posts RSS Feed" href="http://jmonkeyengine.org/feed/"><link rel="alternate" type="application/atom+xml" title="jMonkeyEngine.org Blog Posts Atom Feed" href="http://jmonkeyengine.org/feed/atom/"><link rel="pingback" href="http://jmonkeyengine.org/xmlrpc.php"> <script type="text/javascript">var _gaq=_gaq||[];_gaq.push(['_setAccount','UA-17652261-1']);_gaq.push(['_trackPageview'],['_trackPageLoadTime']);(function(){var ga=document.createElement('script');ga.type='text/javascript';ga.async=true;ga.src=('https:'==document.location.protocol?'https://ssl':'http://www')+'.google-analytics.com/ga.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga,s);})();</script> <link rel="stylesheet" id="fancybox-ie-fix-css" href="jme3%20advanced%20jme3_shaders-Dateien/jquery.css" type="text/css" media="all"><link rel="stylesheet" id="gsc_style_search_bar-css" href="jme3%20advanced%20jme3_shaders-Dateien/minimalist.css" type="text/css" media="all"> <script type="text/javascript" src="jme3%20advanced%20jme3_shaders-Dateien/fancy-js.php"></script> <script type="text/javascript" src="jme3%20advanced%20jme3_shaders-Dateien/jsapi"></script> <script type="text/javascript">var BP_DTheme={my_favs:"My Favorites",accepted:"Accepted",rejected:"Rejected",show_all_comments:"Show all comments for this thread",show_all:"Show all",comments:"comments",close:"Close",mention_explain:"@ is a unique identifier for Lockhead that you can type into any message on this site. Lockhead will be sent a notification and a link to your message any time you use it."};</script> <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://jmonkeyengine.org/xmlrpc.php?rsd"><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://jmonkeyengine.org/wp-includes/wlwmanifest.xml"><link rel="index" title="jMonkeyEngine.org" href="http://jmonkeyengine.org/"><meta name="generator" content="WordPress 3.1.1"> <script type="text/javascript">var ajaxurl="http://jmonkeyengine.org/wp-load.php";</script> <script type="text/javascript">var ajax_url="http://jmonkeyengine.org/wp-admin/admin-ajax.php";var ajax_image="http://jmonkeyengine.org/wp-content/plugins/cd-bp-avatar-bubble/_inc/images";var ajax_delay="0";</script> <meta name="generator" content="DokuWiki"><meta name="robots" content="index,follow"><meta name="date" content="2011-03-20T03:02:30+0000"><meta name="keywords" content="jme3,advanced,jme3_shaders"><link rel="search" type="application/opensearchdescription+xml" href="http://jmonkeyengine.org/wiki/lib/exe/opensearch.php" title="jMonkeyEngine.org"><link rel="start" href="http://jmonkeyengine.org/wiki/"><link rel="contents" href="http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:jme3_shaders?do=index" title="Sitemap"><link rel="alternate" type="application/rss+xml" title="Recent Changes" href="http://jmonkeyengine.org/wiki/feed.php"><link rel="alternate" type="application/rss+xml" title="Current Namespace" href="http://jmonkeyengine.org/wiki/feed.php?mode=list&amp;ns=jme3:advanced"><link rel="edit" title="Edit this page" href="http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:jme3_shaders?do=edit"><link rel="alternate" type="text/html" title="Plain HTML" href="http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:jme3_shaders?do=export_xhtml"><link rel="alternate" type="text/plain" title="Wiki Markup" href="http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:jme3_shaders?do=export_raw"><link rel="canonical" href="http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:jme3_shaders"><link rel="stylesheet" media="screen" type="text/css" href="jme3%20advanced%20jme3_shaders-Dateien/css_003.css"><link rel="stylesheet" media="all" type="text/css" href="jme3%20advanced%20jme3_shaders-Dateien/css_002.css"><link rel="stylesheet" media="print" type="text/css" href="jme3%20advanced%20jme3_shaders-Dateien/css.css"> <script type="text/javascript">/*<![CDATA[*/var NS='jme3:advanced';var SIG=' --- //[[|Lockhead]] 2011/05/10 09:41//';var JSINFO={"id":"jme3:advanced:jme3_shaders","namespace":"jme3:advanced"};/*]]>*/</script> <script type="text/javascript" charset="utf-8" src="jme3%20advanced%20jme3_shaders-Dateien/js.php"></script>  <style type="text/css">#header{background-image:url(http://jmonkeyengine.org/wp-content/uploads/2010/09/header-new-31.gif)}#header h1, #header
#desc{display:none}</style><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1"> <script type="text/javascript">jQuery(document).ready(function(){jQuery("a.confirm").click(function(){if(confirm('Are you sure?'))return true;else return false;});});</script> </head><body class="logged-in" id="bp-default"><div id="header"><h1 id="logo"><a href="http://jmonkeyengine.org/" title="Home">jMonkeyEngine.org</a></h1><div id="search-bar"><div id="custom-search" class="padder"><form action="http://jmonkeyengine.org/search" method="post" id="search-form"> <input id="search-terms" name="search-terms" type="text"> <select name="search-which" id="search-which" style="width: auto"><option selected="selected" value="wiki">Wiki</option><option value="forums">Forums</option><option value="posts">Blog</option><option value="groups">Groups</option><option value="members">Members</option><option value="links">Links</option></select> <input name="search-submit" id="search-submit" value="Search" type="submit"> <input id="_wpnonce" name="_wpnonce" value="8d5873f995" type="hidden"><input name="_wp_http_referer" value="/wiki/doku.php/jme3:advanced:jme3_shaders" type="hidden"></form></div></div><div id="access" class="menu-mainmenu-container"><ul id="menu-mainmenu" class="menu-header"><li id="menu-item-688" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-688"><a href="http://jmonkeyengine.org/">Home</a><ul class="sub-menu"><li id="menu-item-1698" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1698"><a href="http://jmonkeyengine.org/">News</a></li><li id="menu-item-705" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-705"><a href="http://jmonkeyengine.org/news-archives/">News Archives</a></li><li id="menu-item-437" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-437"><a href="http://jmonkeyengine.org/activity/">Activity</a></li><li id="menu-item-641" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-641"><a href="http://jmonkeyengine.org/members/">Members</a></li><li id="menu-item-474" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-474"><a href="http://jmonkeyengine.org/legacy-links/">Links</a></li></ul></li><li id="menu-item-696" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-696"><a href="http://jmonkeyengine.org/introduction/">Introduction</a><ul class="sub-menu"><li id="menu-item-1697" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1697"><a href="http://jmonkeyengine.org/introduction/">About</a></li><li id="menu-item-944" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-944"><a href="http://jmonkeyengine.org/introduction/website-manual/">Website Manual</a></li><li id="menu-item-706" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-706"><a href="http://jmonkeyengine.org/introduction/team/">Core Team</a></li><li id="menu-item-1142" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1142"><a href="http://jmonkeyengine.org/introduction/contributors-handbook/">Contributor’s Handbook</a><ul class="sub-menu"><li id="menu-item-1140" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1140"><a href="http://jmonkeyengine.org/introduction/contributors-handbook/anyones-contribution-guidelines/">Anyone’s Contribution Guidelines</a></li><li id="menu-item-1141" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1141"><a href="http://jmonkeyengine.org/introduction/contributors-handbook/modelers-contribution-guidelines/">Modeler’s Contribution Guidelines</a></li><li id="menu-item-1138" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1138"><a href="http://jmonkeyengine.org/introduction/contributors-handbook/web-developers-contribution-guidelines/">Web Developer’s Contribution Guidelines</a></li><li id="menu-item-1137" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1137"><a href="http://jmonkeyengine.org/introduction/contributors-handbook/technical-writers-contribution-guidelines/">Technical Writer’s Contribution Guidelines</a></li><li id="menu-item-1139" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1139"><a href="http://jmonkeyengine.org/introduction/contributors-handbook/programmers-contribution-guidelines/">Programmer’s Contribution Guidelines</a></li></ul></li><li id="menu-item-470" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-470"><a href="http://jmonkeyengine.com/">Product Showcase</a></li></ul></li><li id="menu-item-693" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-693"><a href="http://jmonkeyengine.org/forums">Forums</a><ul class="sub-menu"><li id="menu-item-473" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-473"><a href="http://jmonkeyengine.org/forums">Latest Topics</a></li><li id="menu-item-513" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-513"><a href="http://jmonkeyengine.org/forums-index">All Categories</a></li><li id="menu-item-330" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-330"><a href="#">Troubleshooting &gt;</a><ul class="sub-menu"><li id="menu-item-331" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-331"><a href="http://jmonkeyengine.org/groups/general-2/forum/">General</a></li><li id="menu-item-819" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-819"><a href="http://jmonkeyengine.org/groups/import-assets/forum/">Import Assets</a></li><li id="menu-item-332" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-332"><a href="http://jmonkeyengine.org/groups/graphics/forum/">Graphics</a></li><li id="menu-item-333" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-333"><a href="http://jmonkeyengine.org/groups/effects/forum/">Effects</a></li><li id="menu-item-334" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-334"><a href="http://jmonkeyengine.org/groups/gui/forum/">GUI</a></li><li id="menu-item-336" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-336"><a href="http://jmonkeyengine.org/groups/physics/forum/">Physics</a></li><li id="menu-item-338" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-338"><a href="http://jmonkeyengine.org/groups/sound/forum/">Sound</a></li><li id="menu-item-339" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-339"><a href="http://jmonkeyengine.org/groups/networking/forum/">Networking</a></li><li id="menu-item-690" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-690"><a href="http://jmonkeyengine.org/groups/spidermonkey/forum/">SpiderMonkey</a></li><li id="menu-item-689" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-689"><a href="http://jmonkeyengine.org/groups/terramonkey/forum/">TerraMonkey</a></li><li id="menu-item-360" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-360"><a href="http://jmonkeyengine.org/groups/jmonkeyplatform/forum/">jMonkeyPlatform</a></li></ul></li><li id="menu-item-345" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-345"><a href="#">Project Relations &gt;</a><ul class="sub-menu"><li id="menu-item-346" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-346"><a href="http://jmonkeyengine.org/groups/free-announcements/forum/">Free Announcements</a></li><li id="menu-item-347" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-347"><a href="http://jmonkeyengine.org/groups/user-code-projects/forum/">User Code &amp; Projects</a></li><li id="menu-item-352" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-352"><a href="http://jmonkeyengine.org/groups/site-project/forum/">Site &amp; Project Feedback</a></li><li id="menu-item-354" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-354"><a href="http://jmonkeyengine.org/groups/features/forum/">Feature Discussion</a></li><li id="menu-item-348" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-348"><a href="http://jmonkeyengine.org/groups/general/forum/">Small Talk</a></li></ul></li><li id="menu-item-340" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-340"><a href="#">Development &gt;</a><ul class="sub-menu"><li id="menu-item-343" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-343"><a href="http://jmonkeyengine.org/groups/development-discussion-jme3/forum/">Developers Discussion</a></li><li id="menu-item-344" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-344"><a href="http://jmonkeyengine.org/groups/contribution-depot-jme3/forum/">Contributions</a></li><li id="menu-item-710" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-710"><a href="http://jmonkeyengine.org/groups/documentation-jme3/">Docs Discussion</a></li><li id="menu-item-349" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-349"><a href="http://jmonkeyengine.org/groups/jmonkeyplatform/forum/">jMonkeyPlatform</a></li><li id="menu-item-350" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-350"><a href="http://jmonkeyengine.org/groups/android/forum/">Android</a></li><li id="menu-item-1475" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1475"><a href="http://jmonkeyengine.org/groups/monkeyzone/forum/">MonkeyZone</a></li></ul></li><li id="menu-item-699" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-699"><a href="#">Legacy jME2 &gt;</a><ul class="sub-menu"><li id="menu-item-341" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-341"><a href="http://jmonkeyengine.org/groups/development-discussion-jme2/forum/">Discussion</a></li><li id="menu-item-342" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-342"><a href="http://jmonkeyengine.org/groups/contribution-depot-jme2/forum/">Contributions</a></li><li id="menu-item-353" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-353"><a href="http://jmonkeyengine.org/groups/documentation/forum/">Docs Discussion</a></li></ul></li></ul></li><li id="menu-item-351" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-351"><a href="http://jmonkeyengine.org/wiki/doku.php">Documentation</a><ul class="sub-menu"><li id="menu-item-1671" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1671"><a href="http://jmonkeyengine.org/wiki/doku.php">Installation &amp; Setup</a></li><li id="menu-item-1672" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1672"><a href="http://jmonkeyengine.org/wiki/doku.php/jme3#tutorials_for_beginners">Tutorials &amp; Docs</a></li><li id="menu-item-1673" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1673"><a href="http://jmonkeyengine.org/wiki/doku.php/sdk">SDK Documentation</a></li><li id="menu-item-1674" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1674"><a href="http://jmonkeyengine.org/javadoc/">JavaDoc</a></li><li id="menu-item-1675" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1675"><a href="http://jmonkeyengine.org/groups/documentation-jme3/forum/">Docs Discussion</a></li></ul></li><li id="menu-item-319" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-319"><a href="http://jmonkeyengine.org/groups/tag/projects">Projects</a><ul class="sub-menu"><li id="menu-item-1699" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1699"><a href="http://jmonkeyengine.org/groups/tag/projects">All Projects</a></li><li id="menu-item-320" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-320"><a href="http://jmonkeyengine.org/groups/tag/game">Games</a></li><li id="menu-item-1117" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1117"><a href="http://jmonkeyengine.org/groups/tag/tool">Tools</a></li><li id="menu-item-323" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-323"><a href="http://jmonkeyengine.org/groups/tag/oss">Open Source</a></li></ul></li><li id="menu-item-717" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-717"><a href="http://jmonkeyengine.org/downloads/">Downloads</a><ul class="sub-menu"><li id="menu-item-1695" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1695"><a href="http://jmonkeyengine.org/downloads/">Download jME3 SDK</a></li><li id="menu-item-464" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-464"><a href="http://code.google.com/p/jmonkeyengine/source/checkout">SVN Checkout</a></li><li id="menu-item-697" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-697"><a href="http://code.google.com/p/jmonkeyengine/">GoogleCode</a></li><li id="menu-item-463" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-463"><a href="http://jmonkeyengine.com/nightly/">Nightly Builds</a></li></ul></li></ul></div></div><div id="container"><div class="dokuwiki"><div class="stylehead"><div class="breadcrumbs"> <span class="bchead">You are here: </span><a href="http://jmonkeyengine.org/wiki/doku.php/Documentation" title="Documentation">Documentation</a> » <a href="http://jmonkeyengine.org/wiki/doku.php/jme3" title="jme3">jme3</a> » <a href="http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:documentation" title="jme3:advanced:documentation" class="wikilink2" rel="nofollow">advanced</a> » <a href="http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:jme3_shaders" title="jme3:advanced:jme3_shaders">jme3_shaders</a></div></div><div class="page"><div class="toc"><div style="cursor: pointer;" class="tocheader toctoggle" id="toc__header"><span class="toc_close" style="cursor: pointer;" id="toc__toggle"><span>−</span></span>Table of Contents</div><div id="toc__inside"><ul class="toc"><li class="level1"><div class="li"><span class="li"><a href="#jme3_and_shaders" class="toc">JME3 and Shaders</a></span></div></li><li class="level1"><div class="li"><span class="li"><a href="#shaders_basics" class="toc">Shaders Basics</a></span></div><ul class="toc"><li class="clear"><ul class="toc"><li class="level3"><div class="li"><span class="li"><a href="#how_does_it_work" class="toc">How Does it work?</a></span></div></li><li class="level3"><div class="li"><span class="li"><a href="#variables_scope" class="toc">Variables scope</a></span></div></li><li class="level3"><div class="li"><span class="li"><a href="#spaces_and_matrices" class="toc">Spaces and Matrices</a></span></div></li><li class="level3"><div class="li"><span class="li"><a href="#simple_example_rendering_a_solid_color_on_an_object" class="toc">Simple example : rendering a solid color on an object</a></span></div></li></ul></li></ul></li><li class="level1"><div class="li"><span class="li"><a href="#how_to_use_shaders_in_jme3" class="toc">How to use shaders in JME3</a></span></div><ul class="toc"><li class="clear"><ul class="toc"><li class="level3"><div class="li"><span class="li"><a href="#jme3_global_uniforms" class="toc">JME3 Global uniforms</a></span></div></li><li class="level3"><div class="li"><span class="li"><a href="#jme3_attributes" class="toc">JME3 attributes</a></span></div></li><li class="level3"><div class="li"><span class="li"><a href="#user_s_uniforms" class="toc">User's uniforms</a></span></div></li><li class="level3"><div class="li"><span class="li"><a href="#step_by_step" class="toc">Step by step</a></span></div></li><li class="level3"><div class="li"><span class="li"><a href="#jme3_and_opengl_3_4_compatibility" class="toc">JME3 and OpenGL 3 &amp; 4 compatibility</a></span></div></li><li class="level3"><div class="li"><span class="li"><a href="#useful_links" class="toc">Useful links</a></span></div></li></ul></li></ul></li></ul></div></div><h1><a name="jme3_and_shaders" id="jme3_and_shaders">JME3 and Shaders</a></h1><div class="level1"><p> <br></p></div><h1><a name="shaders_basics" id="shaders_basics">Shaders Basics</a></h1><div class="level1"><p>
 Shaders are sets of instructions that are executed on the GPU. They are
 used to take advantage of hardware acceleration available on the GPU 
for rendering purposes.<br> This paper only covers Vertex and Fragment 
shaders because they are the only ones supported by JME3 for the moment.
 But be aware that there are some other types of shaders (geometry, 
tessellation,…).<br> There are multiple frequently used languages that 
you may encounter to code shaders but as JME3 is based on OpenGL, 
shaders in JME use GLSL and any example in this paper will be written in
 GLSL.<br> <br></p></div><h3><a name="how_does_it_work" id="how_does_it_work">How Does it work?</a></h3><div class="level3"><p>
 To keep it Simple: The Vertex shader is executed once for each vertex 
in the view, then the Fragment shader (also called the Pixel shader) is 
executed once for each pixel on the screen.<br> The main purpose of the 
Vertex shader is to compute the screen coordinate of a vertex (where 
this vertex will be displayed on screen) while the main purpose of the 
Fragment shader is to compute the color of a pixel.<br> This is a very simplified graphic to describe the call stack: <br> <a href="http://jmonkeyengine.org/wiki/lib/exe/fetch.php?hash=d919e8&amp;media=http%3A%2F%2Fjmonkeyengine.org%2Fwp-content%2Fuploads%2F2010%2F09%2FJME3andShaders.png" class="media fancybox" title=""><img src="jme3%20advanced%20jme3_shaders-Dateien/fetch_002.png" class="media" alt="" width="250"></a><br>
 The main program sends mesh data to the vertex shader (vertex position 
in object space, normals, tangents, etc..). The vertex shader computes 
the screen position of the vertex and sends it to the Fragment shader. 
The fragment shader computes the color, and the result is displayed on 
screen or in a texture. <br></p></div><h3><a name="variables_scope" id="variables_scope">Variables scope</a></h3><div class="level3"><p> There are different types of scope for variables in a shader :</p><ul><li class="level1"><div class="li">
 uniform : User defined variables that are passed by the main program to
 the vertex and fragment shader, these variables are global for a given 
execution of a shader.</div></li><li class="level1"><div class="li"> attribute : Per-vertex variables passed by the engine to the shader, like position, normal, etc (Mesh data in the graphic)</div></li><li class="level1"><div class="li"> varrying : Variables passed from the vertex shader to the fragment shader.</div></li></ul><p> There is a large panel of variable types to be used, for more information about it I recommend reading the GLSL specification <a href="http://www.opengl.org/registry/doc/GLSLangSpec.Full.1.20.8.pdf" class="urlextern" title="http://www.opengl.org/registry/doc/GLSLangSpec.Full.1.20.8.pdf" rel="nofollow">here</a>.<br> <br></p></div><h3><a name="spaces_and_matrices" id="spaces_and_matrices">Spaces and Matrices</a></h3><div class="level3"><p>
 To understand the coming example you must know about the different 
spaces in 3D computer graphics, and the matrices used to translate 
coordinate from one space to another.<br> <a href="http://jmonkeyengine.org/wiki/lib/exe/fetch.php?hash=65c1f0&amp;media=http%3A%2F%2Fjmonkeyengine.org%2Fwp-content%2Fuploads%2F2010%2F09%2FJME3andShaders-1.png" class="media fancybox" title=""><img src="jme3%20advanced%20jme3_shaders-Dateien/fetch.png" class="media" alt=""></a><br>
 The engine passes the object space coordinates to the vertex shader. We
 need to compute its position in projection space. To do that we 
transform the object space position by the WorldViewProjectionMatrix 
which is a combination of the World, View, Projection matrices (who 
would have guessed?).<br> <br></p></div><h3><a name="simple_example_rendering_a_solid_color_on_an_object" id="simple_example_rendering_a_solid_color_on_an_object">Simple example : rendering a solid color on an object</a></h3><div class="level3"><p> Here is the simplest application to shaders, rendering a solid color.<br> Vertex Shader : <br></p><pre class="code java"><span class="co1">//the global uniform World view projection matrix </span>
<span class="co1">//(more on global uniforms below)</span>
uniform mat4 g_WorldViewProjectionMatrix<span class="sy0">;</span>
<span class="co1">//The attribute inPosition is the Object space position of the vertex</span>
attribute vec3 inPosition<span class="sy0">;</span>
&nbsp;
<span class="kw4">void</span> main<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>
    <span class="co1">//Transformation of the object space coordinate to projection space</span>
    <span class="co1">//coordinates.</span>
    <span class="co1">//- gl_Position is the standard GLSL variable holding projection space</span>
    <span class="co1">//position. It must be filled in the vertex shader</span>
    <span class="co1">//- To convert position we multiply the worldViewProjectionMatrix by</span>
    <span class="co1">//by the position vector. </span>
    <span class="co1">//The multiplication must be done in this order.</span>
    gl_Position <span class="sy0">=</span> g_WorldViewProjectionMatrix <span class="sy0">*</span> vec4<span class="br0">(</span>inPosition, <span class="nu0">1.0</span><span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span></pre><p> Fragment Shader : <br></p><pre class="code java"><span class="kw4">void</span> main<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>
    <span class="co1">//returning the color of the pixel (here solid blue)</span>
    <span class="co1">//- gl_FragColor is the standard GLSL variable that holds the pixel</span>
    <span class="co1">//color. It must be filled in the Fragment Shader.</span>
    gl_FragColor <span class="sy0">=</span> vec4<span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">0.0</span>, <span class="nu0">1.0</span>, <span class="nu0">1.0</span><span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span></pre><p> For example applying this shader to a sphere would render a solid blue sphere on screen.<br> <br></p></div><h1><a name="how_to_use_shaders_in_jme3" id="how_to_use_shaders_in_jme3">How to use shaders in JME3</a></h1><div class="level1"><p> You probably heard that JME3 is “shader oriented”, but what does that mean?<br>
 Usually to use shaders you must create what is called a program. This 
program specify the vertex shader and the fragment shader to use.<br> JME3 encloses this in the material system. Every material in JME3 uses shaders.<br> For example let’s have a look at the SolidColor.j3md file : <br></p><pre class="code java">MaterialDef Solid <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Acolor+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Color</span></a> <span class="br0">{</span>
    <span class="co1">//This is the complete list of user defined uniforms to be used in the</span>
    <span class="co1">//shaders</span>
    MaterialParameters <span class="br0">{</span>
        Vector4 <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Acolor+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Color</span></a>
    <span class="br0">}</span>
&nbsp;
    Technique <span class="br0">{</span>
        <span class="co1">//This is where the vertex and fragment shader files are</span>
        <span class="co1">//specified</span>
        VertexShader GLSL100<span class="sy0">:</span>   Common<span class="sy0">/</span>MatDefs<span class="sy0">/</span>Misc<span class="sy0">/</span>SolidColor.<span class="me1">vert</span>
        FragmentShader GLSL100<span class="sy0">:</span> Common<span class="sy0">/</span>MatDefs<span class="sy0">/</span>Misc<span class="sy0">/</span>SolidColor.<span class="me1">frag</span>
&nbsp;
        <span class="co1">//This is where you specify which global uniform you need for your</span>
        <span class="co1">//shaders</span>
        WorldParameters <span class="br0">{</span>
            WorldViewProjectionMatrix
        <span class="br0">}</span>
    <span class="br0">}</span>
    Technique FixedFunc <span class="br0">{</span>
    <span class="br0">}</span>
<span class="br0">}</span></pre><p> For more information on JME3 material system, i suggest you read this <a href="http://jmonkeyengine.org/groups/development-discussion-jme3/forum/topic/jmonkeyengine3-material-system-full-explanation" class="urlextern" title="http://jmonkeyengine.org/groups/development-discussion-jme3/forum/topic/jmonkeyengine3-material-system-full-explanation" rel="nofollow">topic</a>.<br> <br></p></div><h3><a name="jme3_global_uniforms" id="jme3_global_uniforms">JME3 Global uniforms</a></h3><div class="level3"><p>
 JME3 can expose pre-computed global uniforms to your shaders. You must 
specify the one that are required for your shader in the WorldParameters
 section of the material definition file (.j3md).<br> Note that in the shader the uniform names will be prefixed by a “g_”.<br> In the example above, WorldViewProjectionMatrix is declared as uniform mat4 g_WorldViewProjectionMatrix in the shader.<br> The complete list of global uniforms that can be used in JME3 can be found <a href="http://code.google.com/p/jmonkeyengine/source/browse/trunk/engine/src/core/com/jme3/shader/UniformBinding.java" class="urlextern" title="http://code.google.com/p/jmonkeyengine/source/browse/trunk/engine/src/core/com/jme3/shader/UniformBinding.java" rel="nofollow">here</a>.<br> <br></p></div><h3><a name="jme3_attributes" id="jme3_attributes">JME3 attributes</a></h3><div class="level3"><p> Those are different attributes that are always passed to your shader.<br> you can find a complete list of those attribute in the Type enum of the VertexBuffer <a href="http://code.google.com/p/jmonkeyengine/source/browse/trunk/engine/src/core/com/jme3/scene/VertexBuffer.java" class="urlextern" title="http://code.google.com/p/jmonkeyengine/source/browse/trunk/engine/src/core/com/jme3/scene/VertexBuffer.java" rel="nofollow">here</a>.<br> Note that in the shader the attributes names will be prefixed by a “in”.<br> <br></p></div><h3><a name="user_s_uniforms" id="user_s_uniforms">User's uniforms</a></h3><div class="level3"><p> At some point when making your own shader you'll need to pass your own uniforms<br> Any uniform has to be declared in the material definition file in the "MaterialParameters" section.<br></p><pre class="code java">    MaterialParameters <span class="br0">{</span>
        Vector4 <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Acolor+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Color</span></a>
    <span class="br0">}</span></pre><p> This material parameter will be sent from the engine to the shader as follow</p><pre class="code java">   material.<span class="me1">setColor</span><span class="br0">(</span><span class="st0">"Color"</span>, ColorRGBA<span class="br0">(</span>1.0f, 0.0f, 0.0f, 1.0f<span class="br0">)</span><span class="sy0">;</span><span class="co1">//red color</span></pre><p> Note that there is a setXXXX method for any type of uniform you want to pass.<br>
 To use this uniform in the shader, you need to declare it in the .frag 
or in the .vert files (depending on where you need it) as follow :</p><pre class="code java">   uniform vec4 m_Color<span class="sy0">;</span></pre><p> <strong>Note the "m_" prefix that specifies that the uniform is a material parameter.</strong><br> This uniform will be populated at runtime with the value you sent.</p></div><h3><a name="step_by_step" id="step_by_step">Step by step</a></h3><div class="level3"><ul><li class="level1"><div class="li"> Create a vertex shader (.vert) file</div></li><li class="level1"><div class="li"> Create a fragment shader (.frag) file</div></li><li class="level1"><div class="li">
 Create a material definition (j3md) file specifying the user defined 
uniforms, path to the shaders and the global uniforms to use</div></li><li class="level1"><div class="li"> In your initSimpleApplication, create a material using this definition, apply it to a geometry</div></li><li class="level1"><div class="li"> That’s it!!</div></li></ul><pre class="code java">    <span class="co1">// A cube </span>
    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Abox+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Box</span></a> box<span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Abox+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Box</span></a><span class="br0">(</span>Vector3f.<span class="me1">ZERO</span>, 1f,1f,1f<span class="br0">)</span><span class="sy0">;</span>
    Geometry cube <span class="sy0">=</span> <span class="kw1">new</span> Geometry<span class="br0">(</span><span class="st0">"box"</span>, box<span class="br0">)</span><span class="sy0">;</span>
    Material mat <span class="sy0">=</span> <span class="kw1">new</span> Material<span class="br0">(</span>assetManager,<span class="st0">"Path/To/My/materialDef.j3md"</span><span class="br0">)</span><span class="sy0">;</span>
    cube.<span class="me1">setMaterial</span><span class="br0">(</span>mat<span class="br0">)</span><span class="sy0">;</span>
    rootNode.<span class="me1">attachChild</span><span class="br0">(</span>cube<span class="br0">)</span><span class="sy0">;</span></pre><p> <br></p></div><h3><a name="jme3_and_opengl_3_4_compatibility" id="jme3_and_opengl_3_4_compatibility">JME3 and OpenGL 3 &amp; 4 compatibility</a></h3><div class="level3"><p> GLSL 1.0 to 1.2 comes with build in attributes and uniforms (ie, gl_Vertex, gl_ModelViewMatrix, etc…).<br>
 Those attributes are deprecated since GLSL 1.3 (opengl 3), hence JME3 
global uniforms and attributes. Here is a list of deprecated attributes 
and their equivalent in JME3<br></p><div class="table sectionedit1"><table class="inline"><tbody><tr class="row0"><th class="col0">GLSL 1.2 attributes</th><th class="col1">JME3 equivalent</th></tr><tr class="row1"><td class="col0 leftalign">gl_Vertex</td><td class="col1">inPosition</td></tr><tr class="row2"><td class="col0 leftalign">gl_Normal</td><td class="col1">inNormal</td></tr><tr class="row3"><td class="col0 leftalign">gl_Color</td><td class="col1">inColor</td></tr><tr class="row4"><td class="col0 leftalign">gl_MultiTexCoord0</td><td class="col1">inTexCoord</td></tr><tr class="row5"><td class="col0 leftalign">gl_ModelViewMatrix</td><td class="col1">g_WorldViewMatrix</td></tr><tr class="row6"><td class="col0 leftalign">gl_ProjectionMatrix</td><td class="col1">g_ProjectionMatrix</td></tr><tr class="row7"><td class="col0 leftalign">gl_ModelViewProjectionMatrix</td><td class="col1">g_WorldViewProjectionMatrix</td></tr><tr class="row8"><td class="col0 leftalign">gl_NormalMatrix</td><td class="col1">g_NormalMatrix</td></tr></tbody></table></div></div><h3><a name="useful_links" id="useful_links">Useful links</a></h3><div class="level3"><p> <a href="http://www.eng.utah.edu/%7Ecs5610/lectures/GLSL-ATI-Intro.pdf" class="urlextern" title="http://www.eng.utah.edu/~cs5610/lectures/GLSL-ATI-Intro.pdf" rel="nofollow">http://www.eng.utah.edu/~cs5610/lectures/GLSL-ATI-Intro.pdf</a></p></div></div><div class="clearer">&nbsp;</div><div class="stylefoot"><div class="license">Except where otherwise noted, content on this wiki is licensed under the following license:<a href="http://creativecommons.org/licenses/by/3.0/" rel="license" class="urlextern">CC Attribution 3.0 Unported</a></div><div class="breadcrumbs"> <span class="bchead">Trace:</span> <span class="bcsep">»</span> <span class="curid"><a href="http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:jme3_shaders" class="breadcrumbs" title="jme3:advanced:jme3_shaders">jme3_shaders</a></span></div></div></div><div class="no"><img src="jme3%20advanced%20jme3_shaders-Dateien/indexer.gif" alt="" height="1" width="1"></div></div><div id="footer"><p>jMonkeyEngine.org is proudly powered by <a href="http://wordpress.org/">WordPress</a> and <a href="http://buddypress.org/">BuddyPress</a></p></div><div id="wp-admin-bar"><div class="padder"><a href="http://jmonkeyengine.org/" id="admin-bar-logo">jMonkeyEngine.org</a><ul class="main-nav"><li id="bp-adminbar-account-menu"><a href="http://jmonkeyengine.org/members/Lockhead/">My Account</a><ul><li class="alt"><a id="bp-admin-activity" href="http://jmonkeyengine.org/members/Lockhead/activity/">Activity</a><ul><li class="alt"><a id="bp-admin-just-me" href="http://jmonkeyengine.org/members/Lockhead/activity/just-me/">Personal</a></li><li><a id="bp-admin-activity-groups" href="http://jmonkeyengine.org/members/Lockhead/activity/groups/">Groups</a></li><li class="alt"><a id="bp-admin-activity-links" href="http://jmonkeyengine.org/members/Lockhead/activity/links/">Links</a></li><li><a id="bp-admin-activity-favs" href="http://jmonkeyengine.org/members/Lockhead/activity/favorites/">Favorites</a></li><li class="alt"><a id="bp-admin-activity-mentions" href="http://jmonkeyengine.org/members/Lockhead/activity/mentions/">@Lockhead Mentions</a></li></ul></li><li><a id="bp-admin-profile" href="http://jmonkeyengine.org/members/Lockhead/profile/">Profile</a><ul><li class="alt"><a id="bp-admin-public" href="http://jmonkeyengine.org/members/Lockhead/profile/public/">Public</a></li><li><a id="bp-admin-edit" href="http://jmonkeyengine.org/members/Lockhead/profile/edit/">Edit Profile</a></li><li class="alt"><a id="bp-admin-change-avatar" href="http://jmonkeyengine.org/members/Lockhead/profile/change-avatar/">Change Avatar</a></li></ul></li><li class="alt"><a id="bp-admin-messages" href="http://jmonkeyengine.org/members/Lockhead/messages/">Messages <strong></strong></a><ul><li class="alt"><a id="bp-admin-inbox" href="http://jmonkeyengine.org/members/Lockhead/messages/inbox/">Inbox</a></li><li><a id="bp-admin-sentbox" href="http://jmonkeyengine.org/members/Lockhead/messages/sentbox/">Sent Messages</a></li><li class="alt"><a id="bp-admin-compose" href="http://jmonkeyengine.org/members/Lockhead/messages/compose/">Compose</a></li></ul></li><li><a id="bp-admin-groups" href="http://jmonkeyengine.org/members/Lockhead/groups/">Groups <span>(11)</span></a><ul><li class="alt"><a id="bp-admin-groups-my-groups" href="http://jmonkeyengine.org/members/Lockhead/groups/my-groups/">My Groups</a></li><li><a id="bp-admin-invites" href="http://jmonkeyengine.org/members/Lockhead/groups/invites/">Invites</a></li></ul></li><li class="alt"><a id="bp-admin-links" href="http://jmonkeyengine.org/members/Lockhead/links/">Links <span>(0)</span></a><ul><li class="alt"><a id="bp-admin-links-my-links" href="http://jmonkeyengine.org/members/Lockhead/links/my-links/">My Links</a></li></ul></li><li><a id="bp-admin-settings" href="http://jmonkeyengine.org/members/Lockhead/settings/">Settings</a><ul><li class="alt"><a id="bp-admin-general" href="http://jmonkeyengine.org/members/Lockhead/settings/general/">General</a></li><li><a id="bp-admin-notifications" href="http://jmonkeyengine.org/members/Lockhead/settings/notifications/">Notifications</a></li><li class="alt"><a id="bp-admin-delete-account" href="http://jmonkeyengine.org/members/Lockhead/settings/delete-account/">Delete Account</a></li></ul></li><li class="alt"><a id="bp-admin-logout" class="logout" href="http://jmonkeyengine.org/wp-login.php?action=logout&amp;redirect_to=http%3A%2F%2Fjmonkeyengine.org&amp;_wpnonce=d0aa1c690b">Log Out</a></li></ul></li><li id="bp-adminbar-notifications-menu"><a href="http://jmonkeyengine.org/members/Lockhead/">Notifications</a><ul><li><a href="http://jmonkeyengine.org/members/Lockhead/">No new notifications.</a></li></ul></li><li><a href="#">Wiki</a><ul><li><a href="http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:jme3_shaders?do=edit&amp;rev=" class="action edit" accesskey="e" rel="nofollow" title="Edit this page">Edit this page</a></li><li><a href="http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:jme3_shaders?do=revisions" class="action revs" accesskey="o" rel="nofollow" title="Old revisions">Old revisions</a></li><li><a href="http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:jme3_shaders?do=backlink" class="action backlink" accesskey="" rel="nofollow" title="Backlinks">Backlinks</a></li><li><a href="http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:jme3_shaders?do=index" class="action index" accesskey="x" rel="nofollow" title="Sitemap">Sitemap</a></li><li><a href="http://jmonkeyengine.org/wiki/doku.php/tasks">Tasks</a></li><li><a href="http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:jme3_shaders?do=recent" class="action recent" accesskey="r" rel="nofollow" title="Recent changes">Recent changes</a></li></ul></li><li class="align-right" id="bp-adminbar-visitrandom-menu"> <a href="#">Visit</a><ul class="random-list"><li><a href="http://jmonkeyengine.org/members/?random-member">Random Member</a></li><li class="alt"><a href="http://jmonkeyengine.org/groups/?random-group">Random Group</a></li><li><a href="http://jmonkeyengine.org/links/?random-link">Random Link</a></li></ul></li></ul></div></div> <script type="text/javascript">function wo_map_console(url){window.open(url,"wo_map_console","height=650,width=800,toolbar=no,statusbar=no,scrollbars=yes").focus();}</script> <script src="jme3%20advanced%20jme3_shaders-Dateien/e-201119.js" type="text/javascript"></script><script src="jme3%20advanced%20jme3_shaders-Dateien/quant.js" type="text/javascript"></script> <script type="text/javascript">st_go({blog:'14883676',v:'ext',post:'0'});var load_cmc=function(){linktracker_init(14883676,0,2);};if(typeof addLoadEvent!='undefined')addLoadEvent(load_cmc);else load_cmc();</script><img id="wpstats" src="jme3%20advanced%20jme3_shaders-Dateien/g.gif" alt=""> 
<div id="fancybox-tmp"></div><div id="fancybox-loading"><div></div></div><div id="fancybox-overlay"></div><div id="fancybox-wrap"><div id="fancybox-outer"><div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div><div id="fancybox-content"></div><a id="fancybox-close"></a><div id="fancybox-title"></div><a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a><a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a></div></div><div id="popupContainer"><table class="popupBubble" align="center" border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="corner topLeft"></td><td class="top"></td><td class="corner topRight"></td></tr><tr><td class="left">&nbsp;</td><td><div id="popupContent"></div></td><td class="right">&nbsp;</td></tr><tr><td class="corner bottomLeft">&nbsp;</td><td class="bottom">&nbsp;</td><td class="corner bottomRight"></td></tr></tbody></table></div></body></html>
<!-- Performance optimized by W3 Total Cache. Learn more: http://www.w3-edge.com/wordpress-plugins/

Minified using apc

Served from: jmonkeyengine.org @ 2011-05-10 09:41:31 -->